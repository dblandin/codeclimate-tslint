#!/bin/sh

set -e

version=$1
printf "Pulling docs from TSLint %s\n" "$version"

git clone --quiet --branch "$version" https://github.com/palantir/tslint.git /tmp/tslint

cd /tmp/tslint
npm install
npm run compile:core
npm run compile:scripts
npm run docs
cd -

mkdir -p ./docs
cp /tmp/tslint/docs/_data/rules.json ./docs/rules.json
rm -r /tmp/tslint
